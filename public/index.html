<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Zizu - Real Estate Assistant</title>
  <style>
    body { font-family: Arial; padding: 20px; max-width: 600px; margin: auto; background: #f5f5f5; }
    .chat-box { background: white; padding: 20px; border-radius: 10px; box-shadow: 0 0 10px #ccc; }
    .message { margin-bottom: 10px; padding: 10px; border-radius: 8px; }
    .user { background: #007cba; color: white; text-align: right; }
    .bot { background: #e3f2fd; }
    .input-container { display: flex; flex-direction: column; gap: 10px; margin-top: 10px; }
    input, button { padding: 10px; border-radius: 5px; border: 1px solid #ccc; }
    button { background: #007cba; color: white; border: none; cursor: pointer; }
    .quick-buttons button { margin-right: 10px; margin-bottom: 10px; }
    .contact-form input, .contact-form select { width: 100%; margin-bottom: 10px; }
  </style>
</head>
<body>
  <div class="chat-box">
    <h2>üè† Zizu - Real Estate Assistant</h2>
    <div id="messages"></div>

    <div class="quick-buttons">
      <button onclick="sendQuick('–ö—É–ø–∏—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å')">üè† –ö—É–ø–∏—Ç—å</button>
      <button onclick="sendQuick('–ê—Ä–µ–Ω–¥–æ–≤–∞—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å')">üì¶ –°–Ω—è—Ç—å</button>
      <button onclick="sendQuick('–ü—Ä–æ–¥–∞—Ç—å –Ω–µ–¥–≤–∏–∂–∏–º–æ—Å—Ç—å')">üíº –ü—Ä–æ–¥–∞—Ç—å</button>
    </div>

    <div class="input-container">
      <input id="userInput" placeholder="–í–∞—à –≤–æ–ø—Ä–æ—Å..." />
      <button onclick="sendMessage()">Send</button>
    </div>

    <div id="contactForm" class="contact-form" style="display:none;">
      <h3>üìã –û—Å—Ç–∞–≤—å—Ç–µ –≤–∞—à–∏ –∫–æ–Ω—Ç–∞–∫—Ç—ã</h3>
      <input id="leadName" placeholder="–ò–º—è" />
      <input id="leadEmail" placeholder="Email" />
      <input id="leadPhone" placeholder="–¢–µ–ª–µ—Ñ–æ–Ω" />
      <select id="leadPlanning">
        <option value="">–°—Ä–æ–∫ –ø–æ–∫—É–ø–∫–∏/–∞—Ä–µ–Ω–¥—ã</option>
        <option value="–°—Ä–æ—á–Ω–æ">–°—Ä–æ—á–Ω–æ</option>
        <option value="1‚Äì2 –º–µ—Å—è—Ü–∞">1‚Äì2 –º–µ—Å—è—Ü–∞</option>
        <option value="3‚Äì5 –º–µ—Å—è—Ü–µ–≤">3‚Äì5 –º–µ—Å—è—Ü–µ–≤</option>
      </select>
      <button onclick="submitLead()">–û—Ç–ø—Ä–∞–≤–∏—Ç—å</button>
    </div>
  </div>

  <script>
    const messagesDiv = document.getElementById("messages");
    const sessionId = "session_" + Date.now();

    function sendQuick(text) {
      document.getElementById("userInput").value = text;
      sendMessage();
    }

    async function sendMessage() {
      const input = document.getElementById("userInput");
      const message = input.value.trim();
      if (!message) return;

      messagesDiv.innerHTML += `<div class="message user">${message}</div>`;
      input.value = "";

      const res = await fetch("/chat", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ message, sessionId })
      });

      const data = await res.json();
      messagesDiv.innerHTML += `<div class="message bot">${data.reply}</div>`;

      if (data.showContactForm) {
        document.getElementById("contactForm").style.display = "block";
      }

      messagesDiv.scrollTop = messagesDiv.scrollHeight;
    }

    async function submitLead() {
      const name = document.getElementById("leadName").value;
      const email = document.getElementById("leadEmail").value;
      const phone = document.getElementById("leadPhone").value;
      const planning = document.getElementBy
